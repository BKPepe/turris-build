Repository workflow
===================

Development
-----------

Latest upstream development and features ends up in `master` branch mixed
together. This branch is mainly meant as a test-bed for merging conflicts and to
follow latest upstream changes.

Maintenance
-----------

For every major release there is a branch created with version name. This
branch is created when upstream creates new release and rolls forward. No fixed
hashes, just fixed branches in upstream repositories following their pace for
respective upstream release. If we want to release fix faster than upstream, we
include patch in our repository for the time being and drop it when fixed
upstream.

Releases
--------

Releases are done from maintenance branches. Whenever something is good enough
to be released we release binaries directly from maintenance branch but at the
same time we create an extra commit which freezes hashes and tag it. This
commit is not part of maintenance branch history and differs from the commit
the release was build from by exactly just freezing hashes to the repositories.


--------------------------------------------------------------------------------

   Master
     \          v4.0.0     v4.0.1   v4.0.2   v4.0.3
      \            |          |        |        |
       \-- v4.0 ------------------------------------
        \                            \        \     \
         \                            -- v4.1 ----------------------------
          \                                              |         |
           \                                          v4.1.0    v4.1.1
            \
             \
              \-- v5.0 ----
               \
                \

--------------------------------------------------------------------------------
