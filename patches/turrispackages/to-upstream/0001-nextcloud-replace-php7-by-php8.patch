From b8b59c38695da68ce282a1b39e37933d361af3dd Mon Sep 17 00:00:00 2001
From: Josef Schlehofer <pepe.schlehofer@gmail.com>
Date: Fri, 4 Feb 2022 17:24:28 +0100
Subject: [PATCH] nextcloud: replace php7 by php8

In OpenWrt master, there is only php8, so let's move to it.
Also, drop php7-mod-json (php8-mod-json) as it is core PHP extension
enabled by default
---
 net/nextcloud/Makefile | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/net/nextcloud/Makefile b/net/nextcloud/Makefile
index 05a9f80cd..9479d0700 100644
--- a/net/nextcloud/Makefile
+++ b/net/nextcloud/Makefile
@@ -9,7 +9,7 @@ include $(TOPDIR)/rules.mk
 
 PKG_NAME:=nextcloud
 PKG_VERSION:=21.0.9
-PKG_RELEASE:=1
+PKG_RELEASE:=2
 
 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.bz2
 PKG_SOURCE_URL:=https://download.nextcloud.com/server/releases/
@@ -30,14 +30,14 @@ define Package/nextcloud
 	CATEGORY:=Network
 	TITLE:=Nextcloud server
 	URL:=https://nextcloud.com/
-	DEPENDS=+php7-mod-opcache +php7-fpm +php7-cli +sudo +php7-mod-ctype +php7-mod-fileinfo +php7-mod-xmlreader +php7-mod-openssl +php7-mod-gd +php7-mod-xml +php7-mod-xmlwriter +php7-mod-json +php7-mod-mbstring +php7-mod-pcntl +php7-mod-opcache +php7-mod-session +php7-mod-simplexml +php7-mod-iconv +php7-mod-curl +php7-mod-zip +php7-mod-dom +coreutils-stat +php7 +lighttpd-mod-access +php7-mod-intl +php7-mod-filter +icu-full-data
+	DEPENDS=+php8-mod-opcache +php8-fpm +php8-cli +sudo +php8-mod-ctype +php8-mod-fileinfo +php8-mod-xmlreader +php8-mod-openssl +php8-mod-gd +php8-mod-xml +php8-mod-xmlwriter +php8-mod-mbstring +php8-mod-pcntl +php8-mod-opcache +php8-mod-session +php8-mod-simplexml +php8-mod-iconv +php8-mod-curl +php8-mod-zip +php8-mod-dom +coreutils-stat +php8 +lighttpd-mod-access +php8-mod-intl +php8-mod-filter +icu-full-data
 endef
 
 define Package/nextcloud-install
 	SECTION:=net
 	CATEGORY:=Network
 	TITLE:=Nextcloud server installation script
-	DEPENDS=+nextcloud +mariadb-server +php7-mod-pdo-mysql +mariadb-client
+	DEPENDS=+nextcloud +mariadb-server +php8-mod-pdo-mysql +mariadb-client
 endef
 
 define Package/$(PKG_NAME)/description
-- 
2.32.0

