From 4301c161babe96f0ed5efbc95cd4887796a2fdfd Mon Sep 17 00:00:00 2001
From: Ben Kochie <superq@gmail.com>
Date: Mon, 6 Apr 2020 10:23:41 +0200
Subject: [PATCH] config: Add option for CONFIG_PROC_STRIPPED

Allow downstream projects to configure the kernel
CONFIG_PROC_STRIPPED patch.

Signed-off-by: Ben Kochie <superq@gmail.com>
---
 config/Config-kernel.in          | 4 ++++
 target/linux/generic/config-4.14 | 2 +-
 target/linux/generic/config-4.19 | 2 +-
 target/linux/generic/config-5.4  | 2 +-
 4 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/config/Config-kernel.in b/config/Config-kernel.in
index fc24c3c..8c0ba6c 100644
--- a/config/Config-kernel.in
+++ b/config/Config-kernel.in
@@ -459,6 +459,10 @@ config KERNEL_SLUB_DEBUG
 
 config KERNEL_SLUB_DEBUG_ON
 	bool
+ 
+config KERNEL_PROC_STRIPPED
+	bool "Strip extra proc files"
+	default y
 
 config KERNEL_SLABINFO
 	select KERNEL_SLUB_DEBUG
diff --git a/target/linux/generic/config-4.14 b/target/linux/generic/config-4.14
index 605427b..2c6b344 100644
--- a/target/linux/generic/config-4.14
+++ b/target/linux/generic/config-4.14
@@ -3646,7 +3646,7 @@ CONFIG_PRINT_STACK_DEPTH=64
 CONFIG_PROC_FS=y
 # CONFIG_PROC_KCORE is not set
 # CONFIG_PROC_PAGE_MONITOR is not set
-CONFIG_PROC_STRIPPED=y
+# CONFIG_PROC_STRIPPED is not set
 CONFIG_PROC_SYSCTL=y
 # CONFIG_PROFILE_ALL_BRANCHES is not set
 # CONFIG_PROFILE_ANNOTATED_BRANCHES is not set
diff --git a/target/linux/generic/config-4.19 b/target/linux/generic/config-4.19
index 4ce3de5..6573028 100644
--- a/target/linux/generic/config-4.19
+++ b/target/linux/generic/config-4.19
@@ -3846,7 +3846,7 @@ CONFIG_PRINT_STACK_DEPTH=64
 CONFIG_PROC_FS=y
 # CONFIG_PROC_KCORE is not set
 # CONFIG_PROC_PAGE_MONITOR is not set
-CONFIG_PROC_STRIPPED=y
+# CONFIG_PROC_STRIPPED is not set
 CONFIG_PROC_SYSCTL=y
 # CONFIG_PROC_VMCORE_DEVICE_DUMP is not set
 # CONFIG_PROFILE_ALL_BRANCHES is not set
diff --git a/target/linux/generic/config-5.4 b/target/linux/generic/config-5.4
index 8685698..8b4acc1 100644
--- a/target/linux/generic/config-5.4
+++ b/target/linux/generic/config-5.4
@@ -4096,7 +4096,7 @@ CONFIG_PRINT_STACK_DEPTH=64
 CONFIG_PROC_FS=y
 # CONFIG_PROC_KCORE is not set
 # CONFIG_PROC_PAGE_MONITOR is not set
-CONFIG_PROC_STRIPPED=y
+# CONFIG_PROC_STRIPPED is not set
 CONFIG_PROC_SYSCTL=y
 # CONFIG_PROC_VMCORE_DEVICE_DUMP is not set
 # CONFIG_PROFILE_ALL_BRANCHES is not set
-- 
2.24.1

