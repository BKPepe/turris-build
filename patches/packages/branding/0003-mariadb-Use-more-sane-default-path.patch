From 760b460dcd943440e91fc69847304b073810256b Mon Sep 17 00:00:00 2001
From: Michal Hrusecky <michal.hrusecky@nic.cz>
Date: Wed, 12 Dec 2018 15:08:45 +0100
Subject: [PATCH 3/6] mariadb: Use more sane default path

Let's set default paths in a way that makes sense.

Signed-off-by: Michal Hrusecky <Michal@Hrusecky.net>
---
 utils/mariadb/Makefile | 21 ++++++---------------
 1 file changed, 6 insertions(+), 15 deletions(-)

diff --git a/utils/mariadb/Makefile b/utils/mariadb/Makefile
index 6057919..f5b5abb 100644
--- a/utils/mariadb/Makefile
+++ b/utils/mariadb/Makefile
@@ -338,20 +338,11 @@ CMAKE_OPTIONS += \
 	-DDISABLE_SHARED=NO \
 	-DENABLED_PROFILING=OFF \
 	-DENABLE_STATIC_LIBS=OFF \
-	-DINSTALL_DOCDIR=share/doc/mariadb \
-	-DINSTALL_DOCREADMEDIR=share/doc/mariadb \
-	-DINSTALL_MANDIR=share/man \
-	-DINSTALL_MYSQLSHAREDIR=share/mysql \
-	-DINSTALL_MYSQLTESTDIR="" \
-	-DINSTALL_PLUGINDIR=lib/mysql/plugin \
-	-DINSTALL_SBINDIR=bin \
-	-DINSTALL_SCRIPTDIR=bin \
-	-DINSTALL_SQLBENCHDIR="" \
-	-DINSTALL_SUPPORTFILESDIR=share/mysql \
-	-DINSTALL_UNIX_ADDRDIR=/var/run/mysqld/mysqld.sock \
-	-DMYSQLD_USER=mariadb \
-	-DMYSQL_DATADIR=/var/lib/mysql \
-	-DMYSQL_UNIX_ADDR=/var/run/mysqld/mysqld.sock \
+    -DINSTALL_MYSQLSHAREDIR=share/mariadb \
+    -DINSTALL_LAYOUT=RPM \
+    -DINSTALL_PLUGINDIR=lib/mariadb/plugin \
+    -DINSTALL_MYSQLDATADIR=/srv/mysql \
+    -DINSTALL_UNIX_ADDRDIR=/var/run/mysql.sock
 	-DSKIP_TESTS=ON \
 	-DWITH_ASAN=OFF \
 	-DWITH_EMBEDDED_SERVER=OFF \
@@ -514,7 +505,7 @@ define Package/mariadb-server-extra/install
 endef
 
 define Package/mariadb-server/conffiles
-/etc/mysql/my.cnf
+/etc/my.cnf
 $(PLUGIN_DIR)/daemon_example.ini
 endef
 
-- 
2.19.2

