From 9c1b16b617034637c3f9a02f1a2919fa7ed8b243 Mon Sep 17 00:00:00 2001
From: Stepan Henek <stepan.henek@nic.cz>
Date: Thu, 23 Aug 2018 13:37:56 +0200
Subject: [PATCH] python: host openssl build fix

Signed-off-by: Stepan Henek <stepan.henek@nic.cz>
---
 lang/python/python/Makefile  | 6 ++++++
 lang/python/python3/Makefile | 6 ++++++
 2 files changed, 12 insertions(+)

diff --git a/lang/python/python/Makefile b/lang/python/python/Makefile
index 3e47ead..77c5ada 100644
--- a/lang/python/python/Makefile
+++ b/lang/python/python/Makefile
@@ -285,6 +285,12 @@ HOST_CONFIGURE_ARGS+= \
 	--with-ensurepip=install \
 	CONFIG_SITE=
 
+HOST_CONFIGURE_VARS+= \
+	LD_LIBRARY_PATH="$(STAGING_DIR_HOST)/lib:$(STAGING_DIR_HOSTPKG)/lib"
+
+HOST_MAKE_VARS+= \
+	LD_LIBRARY_PATH="$(STAGING_DIR_HOST)/lib:$(STAGING_DIR_HOSTPKG)/lib"
+
 define Host/Compile
 	$(call Host/Compile/Default,python Parser/pgen sharedmods)
 endef
diff --git a/lang/python/python3/Makefile b/lang/python/python3/Makefile
index 20ee1d5..092a4be 100644
--- a/lang/python/python3/Makefile
+++ b/lang/python/python3/Makefile
@@ -281,6 +281,12 @@ HOST_CONFIGURE_ARGS+= \
 	--with-ensurepip=install \
 	CONFIG_SITE=
 
+HOST_CONFIGURE_VARS+= \
+	LD_LIBRARY_PATH="$(STAGING_DIR_HOST)/lib:$(STAGING_DIR_HOSTPKG)/lib"
+
+HOST_MAKE_VARS+= \
+	LD_LIBRARY_PATH="$(STAGING_DIR_HOST)/lib:$(STAGING_DIR_HOSTPKG)/lib"
+
 define Host/Compile
 	+$(HOST_MAKE_VARS) $(MAKE) $(HOST_JOBS) -C $(HOST_BUILD_DIR) python Parser/pgen
 	+$(HOST_MAKE_VARS) $(MAKE) $(HOST_JOBS) -C $(HOST_BUILD_DIR) sharedmods
-- 
2.18.0

